(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{8977:(e,t,a)=>{Promise.resolve().then(a.bind(a,9732))},9732:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(5155),r=a(2115),n=a(2355),d=a(3052),l=a(9859),i=a(9434),c=a(285);function o(e){let{nextMonth:t,previousMonth:a,onNextClick:r,onPreviousClick:l}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{type:"button",onClick:e=>null==l?void 0:l(e),disabled:!a,className:"size-7 bg-transparent p-0 opacity-50 hover:opacity-100",children:(0,s.jsx)(n.A,{className:"size-4"})}),(0,s.jsx)("button",{type:"button",onClick:e=>null==r?void 0:r(e),disabled:!t,className:"size-7 bg-transparent p-0 opacity-50 hover:opacity-100",children:(0,s.jsx)(d.A,{className:"size-4"})})]})}function m(e){let{className:t,classNames:a,showOutsideDays:r=!0,...n}=e;return(0,s.jsx)(l.h,{showOutsideDays:r,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:(0,i.cn)((0,c.r)({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,i.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===n.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,i.cn)((0,c.r)({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{Nav:o},...n})}var u=a(6695),x=a(6126),h=a(9230),g=a(7663);function f(){let{user:e}=(0,h.As)(),[t,a]=(0,r.useState)([]),[n,d]=(0,r.useState)(new Date);(0,r.useEffect)(()=>{if(null==e?void 0:e.id){let t=localStorage.getItem("attendance_".concat(e.id));t&&a(JSON.parse(t).map(e=>new Date(e)))}},[null==e?void 0:e.id]),(0,r.useEffect)(()=>{(null==e?void 0:e.id)&&t.length>0&&localStorage.setItem("attendance_".concat(e.id),JSON.stringify(t.map(e=>e.toISOString())))},[t,null==e?void 0:e.id]);let l=e=>{if(!e)return;let s=e.toDateString();t.some(e=>e.toDateString()===s)?a(e=>e.filter(e=>e.toDateString()!==s)):a(t=>[...t,e])},i=(()=>{let e=t.length,a=new Date().toDateString(),s=t.some(e=>e.toDateString()===a),r=0,n=t.sort((e,t)=>t.getTime()-e.getTime()),d=new Date;for(let e=0;e<n.length;e++){let t=n[e];if(Math.floor((d.getTime()-t.getTime())/864e5)===r)r++;else break}return{total:e,todayMarked:s,streak:r}})();return(0,s.jsx)(g.DashboardLayout,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Track your daily attendance"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(u.Zp,{children:[(0,s.jsx)(u.aR,{children:(0,s.jsx)(u.ZB,{children:"Attendance Calendar"})}),(0,s.jsxs)(u.Wu,{children:[(0,s.jsx)(m,{mode:"single",selected:n,onSelect:d,modifiers:{attended:t},modifiersStyles:{attended:{backgroundColor:"#10b981",color:"white",fontWeight:"bold"}},className:"rounded-md border"}),(0,s.jsx)("div",{className:"mt-4 flex items-center justify-center",children:(0,s.jsx)("button",{onClick:()=>l(n),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:t.some(e=>e.toDateString()===(null==n?void 0:n.toDateString()))?"Remove Attendance":"Mark Attendance"})})]})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(u.Zp,{children:[(0,s.jsx)(u.aR,{children:(0,s.jsx)(u.ZB,{children:"Attendance Summary"})}),(0,s.jsxs)(u.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Total Days"}),(0,s.jsx)(x.E,{variant:"secondary",children:i.total})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Current Streak"}),(0,s.jsxs)(x.E,{variant:"secondary",children:[i.streak," days"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Today"}),(0,s.jsx)(x.E,{variant:i.todayMarked?"default":"outline",children:i.todayMarked?"âœ“ Marked":"Not marked"})]})]})]}),(0,s.jsxs)(u.Zp,{children:[(0,s.jsx)(u.aR,{children:(0,s.jsx)(u.ZB,{children:"Recent Attendance"})}),(0,s.jsx)(u.Wu,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[t.sort((e,t)=>t.getTime()-e.getTime()).slice(0,5).map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{children:e.toLocaleDateString()}),(0,s.jsx)(x.E,{variant:"outline",className:"text-xs",children:"Attended"})]},t)),0===t.length&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No attendance records yet"})]})})]})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,754,210,142,102,663,441,684,358],()=>t(8977)),_N_E=e.O()}]);