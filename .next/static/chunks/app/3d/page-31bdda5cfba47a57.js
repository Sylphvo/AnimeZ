(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9304],{7016:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var n=r(5155),a=r(2115),o=r(3264),i=r(7431);let s={"en-US":{controlsWasd:"WASD/Arrow Keys: Move",controlsSpace:"Space: Jump",controlsShift:"Shift: Run",loadingText:"Loading Tea Garden",loadingWait:"Please wait..."},"es-ES":{controlsWasd:"WASD/Flechas: Mover",controlsSpace:"Espacio: Saltar",controlsShift:"Shift: Correr",loadingText:"Cargando Jard\xedn de T\xe9",loadingWait:"Por favor espere..."},"vi-VN":{controlsWasd:"WASD/Mũi t\xean: Di chuyển",controlsSpace:"Space: Nhảy",controlsShift:"Shift: Chạy",loadingText:"Đang tải Vườn Tr\xe0",loadingWait:"Vui l\xf2ng đợi..."}};function c(){let e=(0,a.useRef)(null),t=(0,a.useRef)(null),r=(0,a.useRef)(null),c=(0,a.useRef)(null),l=(0,a.useRef)(void 0),[d,u]=(0,a.useState)(!0),[h,w]=(0,a.useState)("en-US"),f=(0,a.useRef)({forward:!1,backward:!1,left:!1,right:!1,jump:!1,shift:!1}),m=(0,a.useRef)({phi:0,theta:0}),v=(0,a.useRef)({yVelocity:0,isGrounded:!0}),p=(0,a.useCallback)(e=>{var t;return(null==(t=s[h])?void 0:t[e])||s["en-US"][e]||e},[h]);(0,a.useEffect)(()=>{var e;w((e=>{if(s[e])return e;let t=e.split("-")[0];return Object.keys(s).find(e=>e.startsWith(t+"-"))||"en-US"})((null==(e=navigator.languages)?void 0:e[0])||navigator.language||"en-US"))},[]);let g=(0,a.useCallback)(()=>{let e=document.createElement("canvas");e.width=256,e.height=256;let t=e.getContext("2d");t.fillStyle="#3a5f3a",t.fillRect(0,0,256,256);for(let e=0;e<1e3;e++)t.fillStyle="hsl(".concat(80+20*Math.random(),", 50%, ").concat(30+20*Math.random(),"%)"),t.fillRect(256*Math.random(),256*Math.random(),1,1);let r=new o.GOR(e);return r.wrapS=o.GJx,r.wrapT=o.GJx,r.repeat.set(10,10),{grassTexture:r}},[]),y=(0,a.useCallback)(e=>({grass:new o.G_z({color:3825466,map:e.grassTexture}),mossyGrass:new o.G_z({color:4878154}),water:new o.tXL({color:4620980,shininess:100,transparent:!0,opacity:.8}),stone:new o.G_z({color:8421504}),wood:new o.G_z({color:9127187}),trunk:new o.G_z({color:4865064}),lantern:new o.tXL({color:0xff6b35,emissive:0xff6b35,emissiveIntensity:.2}),teaPlant:new o.G_z({color:2263842})}),[]),k=(0,a.useCallback)(e=>{let t=new o.Gu$(.3,8,6),r=new o.ZLX(t,e.teaPlant,200),n=new o.kn4,a=new o.Pq0,i=new o.O9p,s=new o.Pq0;for(let e=0;e<200;e++)a.set((Math.random()-.5)*50,.3,(Math.random()-.5)*50),i.set(0,Math.random()*Math.PI*2,0),s.setScalar(.5+.5*Math.random()),n.makeRotationFromEuler(i),n.setPosition(a),n.scale(s),r.setMatrixAt(e,n);return r.castShadow=!0,r},[]),S=(0,a.useCallback)(e=>{let t=new o.bdM(100,100),r=new o.eaF(t,e.grass);return r.rotation.x=-Math.PI/2,r.receiveShadow=!0,r},[]),x=(0,a.useCallback)(()=>{let e=new o.Gu$(1e3,32,32),t=new o.BKk({vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() {\n          vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n          vWorldPosition = worldPosition.xyz;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        varying vec3 vWorldPosition;\n        void main() {\n          vec3 skyColor = vec3(0.5, 0.7, 1.0); // Light blue\n          vec3 groundColor = vec3(0.1, 0.1, 0.1); // Dark\n          float h = normalize(vWorldPosition).y;\n          gl_FragColor = vec4(mix(groundColor, skyColor, max(pow(max(h, 0.0), 0.8), 0.0)), 1.0);\n        }\n      ",side:o.hsX});return new o.eaF(e,t)},[]),b=(0,a.useCallback)(e=>{let t=new o.$p8(4210752,.4);e.add(t);let r=new o.ZyN(0xffffff,.8);r.position.set(50,50,25),r.castShadow=!0,r.shadow.mapSize.width=2048,r.shadow.mapSize.height=2048,r.shadow.camera.near=.5,r.shadow.camera.far=500,r.shadow.camera.left=-100,r.shadow.camera.right=100,r.shadow.camera.top=100,r.shadow.camera.bottom=-100,e.add(r)},[]),M=(0,a.useCallback)(e=>{e.fog=new o.jUj(8900331,50,200)},[]);return(0,a.useEffect)(()=>{if(!e.current)return;let n=new o.Z58;t.current=n;let a=new o.ubm(75,window.innerWidth/window.innerHeight,.1,1e3);a.position.set(0,5,10),c.current=a;let s=new i.JeP({antialias:!0});s.setSize(window.innerWidth,window.innerHeight),s.shadowMap.enabled=!0,s.shadowMap.type=o.Wk7,r.current=s,e.current.appendChild(s.domElement);let d=y(g()),h=S(d);n.add(h);let w=x();n.add(w),b(n),M(n);let f=k(d);n.add(f),u(!1);let m=()=>{l.current=requestAnimationFrame(m),s.render(n,a)};return m(),()=>{if(l.current&&cancelAnimationFrame(l.current),e.current&&s.domElement){var t;null==(t=e.current)||t.removeChild(s.domElement)}s.dispose()}},[]),(0,a.useEffect)(()=>{let t=e=>{switch(e.code){case"KeyS":case"ArrowUp":f.current.forward=!0;break;case"KeyW":case"ArrowDown":f.current.backward=!0;break;case"KeyD":case"ArrowLeft":f.current.left=!0;break;case"KeyA":case"ArrowRight":f.current.right=!0;break;case"Space":v.current.isGrounded&&(v.current.yVelocity=.3,v.current.isGrounded=!1);break;case"ShiftLeft":case"ShiftRight":f.current.shift=!0}},r=e=>{switch(e.code){case"KeyS":case"ArrowUp":f.current.forward=!1;break;case"KeyW":case"ArrowDown":f.current.backward=!1;break;case"KeyD":case"ArrowLeft":f.current.left=!1;break;case"KeyA":case"ArrowRight":f.current.right=!1;break;case"ShiftLeft":case"ShiftRight":f.current.shift=!1}},n=e=>{document.pointerLockElement&&(m.current.theta-=.002*e.movementX,m.current.phi-=.002*e.movementY,m.current.phi=Math.max(-Math.PI/2,Math.min(Math.PI/2,m.current.phi)))},a=()=>{e.current&&e.current.requestPointerLock()};return window.addEventListener("keydown",t),window.addEventListener("keyup",r),window.addEventListener("mousemove",n),e.current&&e.current.addEventListener("click",a),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",r),window.removeEventListener("mousemove",n),e.current&&e.current.removeEventListener("click",a)}},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>{if(!c.current)return;let e=c.current,t=f.current,r=v.current,n=t.shift?.2:.1;t.forward&&(e.position.x+=Math.sin(m.current.theta)*n,e.position.z+=Math.cos(m.current.theta)*n),t.backward&&(e.position.x-=Math.sin(m.current.theta)*n,e.position.z-=Math.cos(m.current.theta)*n),t.left&&(e.position.x+=Math.cos(m.current.theta)*n,e.position.z-=Math.sin(m.current.theta)*n),t.right&&(e.position.x-=Math.cos(m.current.theta)*n,e.position.z+=Math.sin(m.current.theta)*n),r.yVelocity+=-.015,e.position.y+=r.yVelocity,e.position.y<=1&&(e.position.y=1,r.yVelocity=0,r.isGrounded=!0),e.rotation.y=m.current.theta,e.rotation.x=m.current.phi},16);return()=>clearInterval(e)},[]),(0,n.jsxs)("div",{className:"w-full h-screen relative",children:[(0,n.jsx)("div",{ref:e,className:"w-full h-full"}),d&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl mb-4",children:p("loadingText")}),(0,n.jsx)("div",{children:p("loadingWait")})]})}),(0,n.jsxs)("div",{className:"absolute bottom-4 left-4 text-white bg-black bg-opacity-50 p-4 rounded",children:[(0,n.jsx)("div",{children:p("controlsWasd")}),(0,n.jsx)("div",{children:p("controlsSpace")}),(0,n.jsx)("div",{children:p("controlsShift")})]})]})}},9180:(e,t,r)=>{Promise.resolve().then(r.bind(r,7016))}},e=>{var t=t=>e(e.s=t);e.O(0,[9367,1831,8441,1684,7358],()=>t(9180)),_N_E=e.O()}]);